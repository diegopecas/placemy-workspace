<!-- apps/fronthouse/src/app/features/dashboard/pages/dashboard/dashboard.component.html -->
<div class="dashboard-container">
  <!-- Header / Toolbar -->
  <mat-toolbar class="dashboard-toolbar">
    <div class="toolbar-content">
      <!-- Logo y nombre -->
      <div class="logo-section">
        <div class="logo-icon">
          <img src="/favicon-96x96.png" alt="PlaceMy" />
        </div>
        <div class="app-info">
          <h1>
            {{ appInfo.name }}
            <span class="tagline">{{ appInfo.tagline }}</span>
          </h1>
        </div>
      </div>

      <!-- Espaciador -->
      <span class="spacer"></span>

      <!-- Usuario y acciones -->
      <div class="user-section">
        <!-- Info del usuario -->
        <div class="user-info">
          <div class="user-details">
            <p class="user-name">{{ getUserDisplayName() }}</p>
            <span class="user-role">{{ getUserRole() }}</span>
          </div>
          <div class="user-avatar">
            {{ getUserInitials() }}
          </div>
        </div>

        <!-- Botón logout -->
        <button
          mat-raised-button
          color="warn"
          (click)="logout()"
          class="logout-btn"
        >
          <mat-icon>logout</mat-icon>
          <span class="logout-text">Cerrar Sesión</span>
        </button>
      </div>
    </div>
  </mat-toolbar>

  <!-- Contenido principal -->
  <div class="dashboard-content">
    <!-- Header de bienvenida -->
    <div class="welcome-section">
      <h2>Bienvenido, {{ getUserDisplayName() }}</h2>
      <p>Selecciona una opción para comenzar a gestionar tu restaurante</p>
    </div>

    <!-- Loading spinner -->
    @if (isLoading()) {
    <div class="loading-container">
      <mat-spinner diameter="60"></mat-spinner>
    </div>
    }

    <!-- Grid de tarjetas del menú principal -->
    <div class="menu-grid">
      @for (card of menuCards; track card.title) {
      <mat-card
        class="menu-card"
        (click)="navigateTo(card.route)"
        [class]="'card-' + card.color"
      >
        <div
          class="card-header"
          [style.background]="
            'linear-gradient(135deg, ' +
            card.colorLight +
            ', ' +
            card.colorDark +
            ')'
          "
        >
          <mat-icon class="card-icon">{{ card.icon }}</mat-icon>
        </div>

        <mat-card-content>
          <h3>{{ card.title }}</h3>
          <p>{{ card.description }}</p>

          <div class="card-stats">
            <span class="stats-label">{{ card.stats.label }}</span>
            <span class="stats-value">{{ card.stats.value }}</span>
          </div>
        </mat-card-content>

        <div class="card-overlay"></div>
      </mat-card>
      }
    </div>

    <!-- Panel de información adicional -->
    <div class="info-grid">
      <!-- Información del sistema -->
      <mat-card class="info-card">
        <mat-card-header>
          <mat-icon mat-card-avatar class="info-icon system-icon"
            >info</mat-icon
          >
          <mat-card-title>Información del Sistema</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="info-item">
            <span class="label">Versión</span>
            <span class="value">{{ appInfo.version }}</span>
          </div>
          <mat-divider></mat-divider>
          <div class="info-item">
            <span class="label">Estado</span>
            <mat-chip class="status-chip active">Activo</mat-chip>
          </div>
          <mat-divider></mat-divider>
          <div class="info-item">
            <span class="label">Última actualización</span>
            <span class="value">Hoy</span>
          </div>
        </mat-card-content>
      </mat-card>

      <!-- Información del usuario -->
      <mat-card class="info-card">
        <mat-card-header>
          <mat-icon mat-card-avatar class="info-icon user-icon"
            >person</mat-icon
          >
          <mat-card-title>Mi Perfil</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          @if (currentUser()) {
          <div class="info-item">
            <span class="label">Usuario</span>
            <span class="value">{{ currentUser()?.username }}</span>
          </div>
          <mat-divider></mat-divider>
          <div class="info-item">
            <span class="label">Email</span>
            <span class="value">{{ currentUser()?.email }}</span>
          </div>
          <mat-divider></mat-divider>
          <div class="info-item">
            <span class="label">Rol</span>
            <mat-chip class="role-chip">{{ getUserRole() }}</mat-chip>
          </div>
          } @else {
          <div class="loading-message">
            <mat-spinner diameter="30"></mat-spinner>
            <p>Cargando información del usuario...</p>
          </div>
          }
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Footer -->
    <footer class="dashboard-footer">
      <p>
        © {{ appInfo.year }} {{ appInfo.name }}. Todos los derechos reservados.
      </p>
    </footer>
  </div>
</div>
